<kt-portlet>
	<kt-portlet-header title="{{ 'EXCHANGE.HISTORY' | translate }}" [class]="'card-head-lg'">
		<ng-container ktPortletTools>
		</ng-container>
	</kt-portlet-header>

	<kt-portlet-body>
		<div>
            <form class="kt-form" [formGroup]="userForm">
            <div class="col-lg-12 kt-margin-bottom-20-mobile form-group">
                <label>{{ 'SEARCH_TK' | translate }} <span class="text-danger">*</span></label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="stk"
                  placeholder="{{ 'SEARCH_TK' | translate }}"
                  onkeydown="return event.key != 'Enter';"
                />
              </div>
			<div *ngIf="account.length !== 0">
				<div class="label-left">{{ 'CHOISE_HISTORY' | translate }}</div>
					<ng-select
					[items]="account"
					placeholder="Chọn tài khoản gửi tiền"
					formControlName="acc"
					class="select"
					bindLabel="accountNumber"
					bindValue="id"
					[searchable]="false"
					(change)="change($event)"
					>
					</ng-select>
            </div>
        </form>
		</div>
		<div class="mat-table__wrapper">
			<mat-table class="lmat-elevation-z8"
				#table
				[dataSource]="account.items"
				*ngIf="dataSource$ | async as account">

				<ng-container matColumnDef="id">
					<mat-header-cell *matHeaderCellDef>ID</mat-header-cell>
					<mat-cell *matCellDef="let account">FPT072020{{account.id}}</mat-cell>
				</ng-container>

				<ng-container matColumnDef="key">
					<mat-header-cell *matHeaderCellDef>{{ 'EXCHANGE.KEY' | translate }}</mat-header-cell>
					<mat-cell *matCellDef="let account">{{account.id}}</mat-cell>
				</ng-container>

				<ng-container matColumnDef="amount">
					<mat-header-cell *matHeaderCellDef>{{ 'EXCHANGE.MONEYX' | translate }}</mat-header-cell>
					<mat-cell *matCellDef="let account">{{getAmount(account.amount)}} VNĐ</mat-cell>
				</ng-container>

				<ng-container matColumnDef="type">
					<mat-header-cell *matHeaderCellDef>{{ 'EXCHANGE.TYPE' | translate }}</mat-header-cell>
					<mat-cell *matCellDef="let account">{{getType(account.amount)}}</mat-cell>
				</ng-container>

				<ng-container matColumnDef="amountAfter">
					<mat-header-cell *matHeaderCellDef>{{ 'EXCHANGE.SD_MONEY' | translate }}</mat-header-cell>
					<mat-cell *matCellDef="let account">{{formatNumber(account.amountAfterTransaction)}} VNĐ</mat-cell>
				</ng-container>

				<ng-container matColumnDef="date">
					<mat-header-cell *matHeaderCellDef>{{ 'EXCHANGE.DATE' | translate }}</mat-header-cell>
					<mat-cell *matCellDef="let account">{{getDate(account.createdAt)}}</mat-cell>
				</ng-container>

				<ng-container matColumnDef="from">
					<mat-header-cell *matHeaderCellDef>{{ 'EXCHANGE.FS' | translate }}</mat-header-cell>
					<mat-cell *matCellDef="let account">{{account.fromOrToAccountNumber}} - {{account.fromOrToFullName}}</mat-cell>
				</ng-container>

				<ng-container matColumnDef="des">
					<mat-header-cell *matHeaderCellDef>{{ 'EXCHANGE.DES' | translate }}</mat-header-cell>
					<mat-cell *matCellDef="let account">{{account.description}}</mat-cell>
				</ng-container>

				<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>

				<mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
			</mat-table>
		</div>
		<div class="mat-table__bottom" *ngIf="dataSource$ | async as dataSource">
			<mat-paginator [pageSize]="5" [pageIndex]="dataSource.pageNumber - 1" [pageSizeOptions]="[5]" (page)="pageEvent = setItems($event)" [length]="dataSource.totalCount" [showFirstLastButtons]="true"></mat-paginator>
		</div>
	</kt-portlet-body>
</kt-portlet>
